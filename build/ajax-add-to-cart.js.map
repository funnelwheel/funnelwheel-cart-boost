{"version":3,"file":"ajax-add-to-cart.js","mappings":"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","sources":["webpack://woocommerce-grow-cart/./src/ajax-add-to-cart.js"],"sourcesContent":["jQuery(function ($) {\r\n\t/* global wc_add_to_cart_params */\r\n\tif (typeof wc_add_to_cart_params === \"undefined\") {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t$(document).on(\"submit\", \"form.cart\", function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar form = $(this),\r\n\t\t\tbutton = form.find('button[type=\"submit\"]'),\r\n\t\t\tproduct_data = form.serializeArray(),\r\n\t\t\thas_product_id = false;\r\n\r\n\t\t$.each(product_data, function (key, form_item) {\r\n\t\t\tif (\r\n\t\t\t\tform_item.name === \"product_id\" ||\r\n\t\t\t\tform_item.name === \"add-to-cart\"\r\n\t\t\t) {\r\n\t\t\t\tif (form_item.value) {\r\n\t\t\t\t\tvar has_product_id = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//If no product id found , look for the form action URL\r\n\t\tif (!has_product_id) {\r\n\t\t\tvar is_url = form.attr(\"action\").match(/add-to-cart=([0-9]+)/);\r\n\t\t\tvar product_id = is_url ? is_url[1] : false;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tbutton.attr(\"name\") &&\r\n\t\t\tbutton.attr(\"name\") == \"add-to-cart\" &&\r\n\t\t\tbutton.attr(\"value\")\r\n\t\t) {\r\n\t\t\tvar product_id = button.attr(\"value\");\r\n\t\t}\r\n\r\n\t\tif (product_id) {\r\n\t\t\tproduct_data.push({\r\n\t\t\t\tname: \"add-to-cart\",\r\n\t\t\t\tvalue: product_id,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tproduct_data.push({\r\n\t\t\tname: \"action\",\r\n\t\t\tvalue: \"growcart_add_to_cart\",\r\n\t\t});\r\n\r\n\t\tform.block({\r\n\t\t\tmessage: null,\r\n\t\t\toverlayCSS: {\r\n\t\t\t\tbackground: \"#ffffff\",\r\n\t\t\t\topacity: 0.6,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t$(document.body).trigger(\"adding_to_cart\", [button, product_data]);\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\turl: woocommerce_growcart.ajaxURL,\r\n\t\t\tdata: $.param(product_data),\r\n\t\t\tsuccess: function (response) {\r\n\t\t\t\tif (response.fragments) {\r\n\t\t\t\t\t$(document.body).trigger(\"added_to_cart\", [\r\n\t\t\t\t\t\tresponse.fragments,\r\n\t\t\t\t\t\tresponse.cart_hash,\r\n\t\t\t\t\t\tbutton,\r\n\t\t\t\t\t]);\r\n\t\t\t\t} else if (response.error && response.product_url) {\r\n\t\t\t\t\twindow.location = response.product_url;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcomplete: function () {\r\n\t\t\t\tform.unblock();\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\t});\r\n});\r\n"],"names":["jQuery","$","wc_add_to_cart_params","document","on","e","preventDefault","form","button","find","product_data","serializeArray","has_product_id","each","key","form_item","name","value","is_url","attr","match","product_id","push","block","message","overlayCSS","background","opacity","body","trigger","ajax","type","url","woocommerce_growcart","ajaxURL","data","param","success","response","fragments","cart_hash","error","product_url","window","location","console","log","complete","unblock"],"sourceRoot":""}