{"version":3,"file":"ajax-add-to-cart.js","mappings":"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","sources":["webpack://woocommerce-grow-cart/./src/ajax-add-to-cart.js"],"sourcesContent":["jQuery(function ($) {\r\n\t/* global wc_add_to_cart_params */\r\n\tif (typeof wc_add_to_cart_params === \"undefined\") {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t$(document).on(\"submit\", \"form.cart\", function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar form = $(this),\r\n\t\t\tbutton = form.find('button[type=\"submit\"]'),\r\n\t\t\tproduct_data = form.serializeArray(),\r\n\t\t\thas_product_id = false;\r\n\r\n\t\t$.each(product_data, function (key, form_item) {\r\n\t\t\tif (\r\n\t\t\t\tform_item.name === \"product_id\" ||\r\n\t\t\t\tform_item.name === \"add-to-cart\"\r\n\t\t\t) {\r\n\t\t\t\tif (form_item.value) {\r\n\t\t\t\t\tvar has_product_id = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//If no product id found , look for the form action URL\r\n\t\tif (!has_product_id) {\r\n\t\t\tvar is_url = form.attr(\"action\").match(/add-to-cart=([0-9]+)/);\r\n\t\t\tvar product_id = is_url ? is_url[1] : false;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tbutton.attr(\"name\") &&\r\n\t\t\tbutton.attr(\"name\") == \"add-to-cart\" &&\r\n\t\t\tbutton.attr(\"value\")\r\n\t\t) {\r\n\t\t\tvar product_id = button.attr(\"value\");\r\n\t\t}\r\n\r\n\t\tif (product_id) {\r\n\t\t\tproduct_data.push({\r\n\t\t\t\tname: \"add-to-cart\",\r\n\t\t\t\tvalue: product_id,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tproduct_data.push({\r\n\t\t\tname: \"action\",\r\n\t\t\tvalue: \"growcart_add_to_cart\",\r\n\t\t});\r\n\r\n\t\tform.block({\r\n\t\t\tmessage: null,\r\n\t\t\toverlayCSS: {\r\n\t\t\t\tbackground: \"#ffffff\",\r\n\t\t\t\topacity: 0.6,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t$(document.body).trigger(\"adding_to_cart\", [button, product_data]);\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\turl: woocommerce_growcart.ajaxURL,\r\n\t\t\tdata: $.param(product_data),\r\n\t\t\tsuccess: function (response) {\r\n\t\t\t\tif (response.fragments) {\r\n\t\t\t\t\t$(document.body).trigger(\"added_to_cart\", [\r\n\t\t\t\t\t\tresponse.fragments,\r\n\t\t\t\t\t\tresponse.cart_hash,\r\n\t\t\t\t\t\tbutton,\r\n\t\t\t\t\t]);\r\n\t\t\t\t} else if (response.error && response.product_url) {\r\n\t\t\t\t\twindow.location = response.product_url;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcomplete: function () {\r\n\t\t\t\tform.unblock();\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\t});\r\n});\r\n"],"names":["jQuery","$","wc_add_to_cart_params","document","on","e","preventDefault","form","button","find","product_data","serializeArray","has_product_id","each","key","form_item","name","value","is_url","attr","match","product_id","push","block","message","overlayCSS","background","opacity","body","trigger","ajax","type","url","woocommerce_growcart","ajaxURL","data","param","success","response","fragments","cart_hash","error","product_url","window","location","console","log","complete","unblock"],"sourceRoot":""}